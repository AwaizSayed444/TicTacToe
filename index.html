<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Tic Tac Toe</title>
    <link type="text/css" rel="stylesheet" href="TicTacToe.css" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body class="body">
    <div class="heading">
      <h1>Tic Tac Toe</h1>
    </div>
    <div class="parentDiv">
      <div class="mainBox">
        <div class="childBox" onClick="putDice('1')">
          <label id="1" class="box1 box"></label>
        </div>
        <div class="childBox" onClick="putDice('2')">
          <label id="2" class="box2 box"></label>
        </div>
        <div class="childBox" onClick="putDice('3')">
          <label id="3" class="box3 box"></label>
        </div>
        <div class="childBox" onClick="putDice('4')">
          <label id="4" class="box4 box"></label>
        </div>
        <div class="childBox" onClick="putDice('5')">
          <label id="5" class="box5 box"></label>
        </div>
        <div class="childBox" onClick="putDice('6')">
          <label id="6" class="box6 box"></label>
        </div>
        <div class="childBox" onClick="putDice('7')">
          <label id="7" class="box7 box"></label>
        </div>
        <div class="childBox" onClick="putDice('8')">
          <label id="8" class="box8 box"></label>
        </div>
        <div class="childBox" onClick="putDice('9')">
          <label id="9" class="box9 box"></label>
        </div>
      </div>
    </div>
    <button onClick="resetFunc()">Reset</button>
    <script>
      let arr = [];
      let turn = 1;
      let tableValue = [];
      function putDice(num) {
        let win = false;
        let flag = false;
        for (let i of arr) {
          if (num === i) {
            flag = true;
            break;
          }
        }
        if (flag === false) {
          if (turn % 2 == 0) {
            document.getElementById(num).innerText = "O";
            arr.push(num);
            tableValue[parseInt(num)] = "O";
            turn++;
          } else {
            document.getElementById(num).innerText = "X";
            arr.push(num);
            tableValue[parseInt(num)] = "X";
            turn++;
          }
        }

        setTimeout(() => {
          if (
            tableValue[1] != null &&
            tableValue[1] == tableValue[2] &&
            tableValue[1] == tableValue[3]
          ) {
            win = true;
            console.log(1);
            alert(tableValue[1] + " wins");
            resetFunc();
          }
          if (
            tableValue[4] != null &&
            tableValue[4] == tableValue[5] &&
            tableValue[4] == tableValue[6]
          ) {
            win = true;
            console.log(2);
            alert(tableValue[4] + " wins");
            resetFunc();
          }
          if (
            tableValue[7] != null &&
            tableValue[7] == tableValue[8] &&
            tableValue[7] == tableValue[9]
          ) {
            win = true;
            console.log(3);
            alert(tableValue[7] + " wins");
            resetFunc();
          }

          if (
            tableValue[1] != null &&
            tableValue[1] == tableValue[4] &&
            tableValue[1] == tableValue[7]
          ) {
            win = true;
            console.log(4);
            alert(tableValue[1] + " wins");
            resetFunc();
          }
          if (
            tableValue[2] != null &&
            tableValue[2] == tableValue[5] &&
            tableValue[2] == tableValue[8]
          ) {
            win = true;
            console.log(5);
            alert(tableValue[2] + " wins");
            resetFunc();
          }
          if (
            tableValue[3] != null &&
            tableValue[3] == tableValue[6] &&
            tableValue[3] == tableValue[9]
          ) {
            win = true;
            console.log(6);
            alert(tableValue[3] + " wins");
            resetFunc();
          }

          if (
            tableValue[1] != null &&
            tableValue[1] == tableValue[5] &&
            tableValue[1] == tableValue[9]
          ) {
            console.log(7);
            win = true;
            alert(tableValue[1] + " wins");
            resetFunc();
          }
          if (
            tableValue[3] != null &&
            tableValue[3] == tableValue[5] &&
            tableValue[3] == tableValue[7]
          ) {
            win = true;
            console.log(8);
            alert(tableValue[3] + " wins");
            resetFunc();
          }

          if (
            win == false &&
            tableValue.length == 10 &&
            tableValue[1] != null &&
            tableValue[2] != null &&
            tableValue[3] != null &&
            tableValue[4] != null &&
            tableValue[5] != null &&
            tableValue[6] != null &&
            tableValue[7] != null &&
            tableValue[8] != null &&
            tableValue[9] != null
          ) {
            alert("Tie");
            resetFunc();
          }
        }, 1);
      }
      function resetFunc() {
        document.getElementById("1").innerText = "";
        document.getElementById("2").innerText = "";
        document.getElementById("3").innerText = "";

        document.getElementById("4").innerText = "";
        document.getElementById("5").innerText = "";
        document.getElementById("6").innerText = "";

        document.getElementById("7").innerText = "";
        document.getElementById("8").innerText = "";
        document.getElementById("9").innerText = "";

        arr = [];
        tableValue = [];
        turn = 1;
      }
    </script>
  </body>
</html>
